$env:GOOSE_DRIVER="postgres"
$env:GOOSE_DBSTRING="postgres://postgres:nabin@localhost:5432/dhune_db?sslmode=disable"

goose -env=none -dir db/migrations up



ğŸ“‹ 2ï¸âƒ£ COMPLETE LIST OF OPERATIONS (Full Order Module)

Now we go full production-mode.

This is your complete Order + Marketplace operation list.

ğŸ§© REQUEST OPERATIONS
User Side

âœ… Create Request

âœ… View My Requests (paginated)

âœ… View Single Request Details

âœ… Cancel Request (if not accepted)

âœ… Expire Request (system job)

ğŸ§© REQUEST SERVICES

Add services during request creation

Fetch request services by request_id

ğŸ§© OFFER OPERATIONS
Vendor Side

Create Offer

Update Offer (if still pending)

Withdraw Offer

View Offers for a Request

View My Submitted Offers

Auto-expire Offer (system job)

ğŸ§© OFFER ACCEPTANCE

Accept Offer (atomic transaction)

Auto-reject others

Create Order

Update Request â†’ ORDER_CREATED

This is the most critical operation.

ğŸ§© ORDER OPERATIONS

Get My Orders (User)

Get My Orders (Vendor)

Get Order Details

Update Order Status (Vendor)

Order status transitions:

CREATED

PICKED_UP

IN_PROGRESS

DELIVERING

COMPLETED

CANCELLED

DISPUTED

Cancel Order (conditional rules)

Mark Completed

Open Dispute

Resolve Dispute (admin later)

ğŸ§© PAYMENT OPERATIONS (Future)

Initiate Payment

Confirm Payment

Refund Payment

ğŸ§© COMMISSION TRACKING (Future)

Calculate Commission

Store Commission Snapshot

Vendor Payout Calculation

ğŸ§© ADMIN OPERATIONS

View All Requests

View All Offers

View All Orders

Force Cancel

Force Resolve Dispute

ğŸ§© REAL-TIME EVENTS (WebSocket)

Events to broadcast:

request_created

offer_created

offer_updated

offer_accepted

offer_rejected

order_created

order_status_updated

order_cancelled

dispute_opened

dispute_resolved

ğŸ“Š Total Core Operations Count

Core Marketplace Flow (must implement first):

~ 20â€“25 operations

With payments + disputes + admin:

~ 35â€“40 operations

This is a serious backend.

ğŸ§  Statistics Endpoints (Very Important)

Later youâ€™ll need:

Total requests created

Total orders completed

Vendor completion rate

Vendor average completion time

Vendor acceptance rate

Platform revenue

Pending disputes count

Add stats endpoints:

Vendor Dashboard Stats

Admin Platform Stats

User Activity Stats

ğŸ§  Concurrency Points Summary

Where concurrency matters:

Offer acceptance

Order status update race

Payment confirmation

Handled via:

DB transactions

Row locking

Conditional updates

NOT goroutines.

ğŸ§  Goroutine Use Summary

Use goroutines for:

WebSocket hub loop

Broadcasting

Background expiry jobs

Payment webhook listener

Notification sending

Not for CRUD.